/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.1/userguide/building_java_projects.html
 */

buildscript {
    println "buildScript 'this': $this"
    println "buildScript 'it': $it"
}

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
}

println "Start evaluate"
project.description = "First Java project"
project.version = new Date().time
project.ext.abc = "ABC"

allprojects {
    println "allProjects1 for ${it.getName()}"
}

allprojects(new Action() {
    void execute(Object p) {
        println "allProjects2 for ${p.name}"
    }
})

artifacts {
    println "artifacts: $it"
}

afterEvaluate {
    println "afterEvaluate: ${it.name} of ${it.class}"
}

beforeEvaluate {
    println "beforeEvaluate: ${it.name} of ${it.class}"
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    println "dependencies 'this': $this"
    println "dependencies 'it': $it"

    // Use JUnit test framework.
    testImplementation 'junit:junit:4.13.2'

    // This dependency is used by the application.
    implementation 'com.google.guava:guava:30.1-jre'
}

application {
    // Define the main class for the application.
    mainClass = 'by.efreet.gradle.App'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(16)
    }
}

task preDemo {
    doLast {
        println "preDemo"
    }
}

task (dependsOn: preDemo, description: "demo_description", demo) {
    println "Configuring 'demo' task"
    println "demo task 'this': ${this.class}"
    println "demo task 'it': ${it.class}"
    println "project.name: ${project.name}"
    println "project.description: ${project.description}"
    println "project.version: ${project.version}"
    println "project.abc: ${project.ext.abc}"
    println "project.abc: ${project.abc}"
    println "project.abc: ${project.property('abc')}"
    ["DEFAULT_BUILD_DIR_NAME", "DEFAULT_BUILD_FILE", "DEFAULT_STATUS", "DEFAULT_VERSION", "GRADLE_PROPERTIES", "PATH_SEPARATOR", "SYSTEM_PROP_PREFIX"].each {
        println "$it: ${this[it]}"
    }
    doLast {
        println "demo action"
    }
}

println "end evaluate"
println "demo: ${demo.class}"